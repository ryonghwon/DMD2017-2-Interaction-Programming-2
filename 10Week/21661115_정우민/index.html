<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>그곳의 광활함..</title>
<link rel="stylesheet" href="./css/style.css">
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
</head>
<body>
<div id="wrap">
    <div class="section">
        <div class="image-area">
            <img src="./img/0.jpg">
        </div>
      <div class="text-area">
            <p class="title">우주...</p>
            <p class="desc">그 곳은 광활한 공간...</p>
        </div>
    </div>
    <div class="section">
        <div class="image-area">
            <img src="./img/1.jpg">
        </div>
        <div class="text-area">
            <p class="title">하늘...</p>
            <p class="desc">그 곳도 광활한 공간...</p>
        </div>
    </div>
    <div class="section">
        <div class="image-area">
            <img src="./img/2.jpg">
        </div>
        <div class="text-area">
            <p class="title">산...</p>
            <p class="desc">그 곳 역시 광활한 공간...</p>
        </div>
    </div>
    <div class="section">
        <div class="image-area">
            <img src="./img/3.jpg">
        </div>
        <div class="text-area">
            <p class="title">대지...</p>
            <p class="desc">그 곳 역시도 광활한 공간...</p>
        </div>
    </div>
    <div class="section">
        <div class="image-area">
            <img src="./img/4.jpg">
        </div>
        <div class="text-area">
            <p class="title">바다...</p>
            <p class="desc">그 곳마저도 광활한 공간...</p>
        </div>
    </div>
    <div class="section">
        <div class="image-area">
            <img src="./img/5.jpg">
        </div>
        <div class="text-area">
            <p class="title">심해...</p>
            <p class="desc">그 곳까지 광활한 공간...<br />
          <br />
          <br />
          <br />
          <br />
          끝</p>
        </div>
    </div>
</div>
<script type="text/javascript">
$(document).ready(function(){

    

    var $win = $(window), $wrap = $('#wrap'), $section = $('.section'), _winH, _max = $section.length;

    $.each($section, function(i, d){
        var $el = $(d);
        $el.css({'z-index': _max - i});
    })

    $win.on({'scroll' : function(){
        parallax();
    }, 'resize' : function(){
        _winH = $win.height();
        $wrap.height(_winH * _max);
        parallax();
    }
    });


    var parallax = function(){
        var scrollTop = $win.scrollTop();
        // console.log(scrollTop);
        $.each($section, function(i, d){
            var $el = $(d), $img = $el.find('img'), $title = $el.find('.title'), $desc = $el.find('.desc'), limitT = _winH * i, limitB = limitT + _winH, elY, imgY, titleY, descY;
            
            if(scrollTop > limitT - _winH && scrollTop <= limitB){

                elY = limitT - scrollTop;
                $el.css({'transform':'translate3d(0, ' + elY + 'px, 0)'})

                if(i > 0){

                    if(i == 5){
                      
                    }else if(i == 3){
                      
                    }else{
                      imgY = elY / 2 * -1;
                      titleY = Math.min(0, elY / 3);
                      descY = Math.max(0, elY / 3);
                    }

                    $img.css({'transform':'translate3d(0, ' + imgY + 'px, 0)'})
                    $title.css({'transform':'translate3d(0, ' + titleY + 'px, 0)'})
                    $desc.css({'transform':'translate3d(0, ' + descY + 'px, 0)'})
                }else {
                
                }
            }else {
                $el.css({'transform':'translate3d(0, 100vh, 0)'})
                $img.css({'transform':'translate3d(0, 0, 0)'})
                
                if(i > 0){
                    $title.css({'transform':'translate3d(0, 0, 0)'})
                    $desc.css({'transform':'translate3d(0, 0, 0)'})
                }                
            }
        });
    };

    $win.trigger('resize');

});
</script>
</body>
</html>