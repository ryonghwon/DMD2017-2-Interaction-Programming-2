<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Parallax Scroll</title>
<link rel="stylesheet" href="./css/style.css">
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
</head>
<body>
<div id="wrap">
    <div class="section">
        <div class="image-area">
            <img src="./img/img05.jpg">
        </div>
    </div>
    <div class="section">
        <div class="image-area">
            <img src="./img/img01.jpg">
        </div>
        <div class="text-area">
            <p class="title">앵두는 귀엽다</p>
            <p class="desc">앵두는 산책나가면 내품에 있는다.</p>
        </div>
    </div>
    <div class="section">
        <div class="image-area">
            <img src="./img/img02.jpg">
        </div>
        <div class="text-area">
            <p class="title">앵두는 귀엽다.</p>
            <p class="desc">앵두는 맨날 누워있는다.</p>
        </div>
    </div>
    <div class="section">
        <div class="image-area">
            <img src="./img/img03.jpg">
        </div>
        <div class="text-area">
            <p class="title">앵두는 바보다</p>
            <p class="desc">손달라고하니깐 발을준다.</p>
        </div>
    </div>
    <div class="section">
        <div class="image-area">
            <img src="./img/img04.jpg">
        </div>
        <div class="text-area">
            <p class="title">앵두를 키우자</p>
            <p class="desc">하지만 앵두는 한마리다</p>
        </div>
    </div>
</div>
<script type="text/javascript">
$(document).ready(function(){
    var $win = $(window),$wrap = $('#wrap'), $section = $('.section'), _winH, _max = $section.length;

    $.each($section, function(i, d){
        var $el = $(d);
        $el.css({'z-index':_max - i});
    });
    $win.on({'scroll':function(){
        Parallax();
    }, 'resize' : function(){//리사이즈 크기조정
        _winH = $win.height();
        $wrap.height(_winH * _max);
        Parallax();
    }
    });


    var Parallax = function(){
        var scrollTop = $win.scrollTop();
        //console.log(scrollTop);
        $.each($section, function(i, d){
           // var $el = $(d), limitT = $el.offset().top, limitB = limitT + _winH
            var $el =  $(d),$img = $el.find('img'),$title = $el.find('.title'), $desc = $el.find('desc'),
             limitT = _winH * i, limitB =  limitT + _winH, elY, titleY, descY;
             
            if(scrollTop > limitT - _winH && scrollTop <= limitB){
                elY = limitT - scrollTop;
                $el.css({'transform':'translate3d(0,' + elY + 'px,0)'});
                
                if(i > 0){
                    if(i == 1){
                        imgY = elY /1 * -1;
                        titleY = Math.min(0, elY / 8);
                        titleX =  0;
                    }else if(i == 2){
                        imgY = elY / 3 * -1;
                        titleY = Math.min(0, elY / 5);
                        descY = Math.max(0, elY / 2 );
                    }else if(i == 3){
                        imgY = elY / 10 * -1;
                        titleX = Math.min(0, elY / 5);
                        descY = Math.max(0, elY / 2 );
                        descX = 0;
                    }else if(i == 4){
                        imgX = 0;
                        imgY = elY /3 * -1;
                        titleY = Math.min(0, elY / 1);
                        descY = Math.max(0, elY / 5 );
                    }else if(i == 5){
                        imgX = 0;
                        imgY = elY /2 * -1;
                        titleY = Math.min(0, elY / 8);
                        descY = Math.max(0, elY / 5 );
                    }
                    
               
                $img.css({'transform':'translate3d(0,' + imgY + 'px,0)'});
                $title.css({'transform':'translate3d(0,' + titleY + 'px,0)'});
                $desc.css({'transform':'translate3d(0,' + descY + 'px,0)'});
                }else{
                //첫번째 section 만 다른 스크롤 액션.
             }
            }else{
                $el.css({'transform':'translate3d(0, 100vh, 0)'});
                $img.css({'transform':'translate3d(0, 0, 0)'});
                if(i > 0){
                    $title.css({'transform':'translate3d(0, 0, 0)'});
                    $desc.css({'transform':'translate3d(0, 0, 0)'});
                 }
            }
        })
    };
    $win.trigger('resize');
    
                // Math.min(0, value); //-> 음수(-)값 일때만 불러오는. 양수일 경우는 0.
                // Math.max();  //-> 양수(+)값 일때만 불러오는. 음수일 경우는 0.


});
</script>
</body>
</html>