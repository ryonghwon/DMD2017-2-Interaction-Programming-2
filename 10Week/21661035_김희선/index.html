<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>21661035 김희선</title>
<link rel="stylesheet" href="./css/style.css">
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
</head>
<body>
<div id="wrap">
    <div class="section">
        <div class="image-area">
            <img src="./img/0.jpg">
        </div>
    </div>
    <div class="section">
        <div class="image-area">
            <img src="./img/1.jpg">
        </div>
        <div class="text-area">
            <p class="title">드래곤에이지 인퀴지션 하세요</p>
            <p class="desc">지금 세일해서 단돈 만육천원!</p>
        </div>
    </div>
    <div class="section">
        <div class="image-area">
            <img src="./img/2.jpg">
        </div>
        <div class="text-area">
            <p class="title">트렌지스터도 재미있다능</p>
            <p class="desc">지금 2만원 세일하면 6천원!</p>
        </div>
    </div>
    <div class="section">
        <div class="image-area">
            <img src="./img/3.jpg">
        </div>
        <div class="text-area">
            <p class="title">어서와</p>
            <p class="desc">내 전자남친 솔라스 짜응이라는</p>
        </div>
    </div>
    <div class="section">
        <div class="image-area">
            <img src="./img/4.jpg">
        </div>
        <div class="text-area">
            <p class="title">뮤지컬 보고싶다</p>
            <p class="desc">하지만 돈이없어</p>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function(){
    
        var $win = $(window),
            $section = $section = $('.section'),
            $wrap = $('#wrap');
    
        var _winH,
            _max = $section.length;
    
        $.each($section, function(i,d){
            var $el = $(d);
    
            $el.css({
                'z-index': _max - i
            })
        });
    
        $win.on({
            'scroll':function(){
                Parallax();
            },
            'resize':function(){
                _winH = $win.height();
                $wrap.height(_winH * _max);
                Parallax();
            }
        });
    
        var Parallax =function(){
            var st = $win.scrollTop();
                $.each($section, function(i, d){
                        var $el = $(d),
                        $img = $el.find('img'),
                        $title = $el.find('.title'),
                        $desc = $el.find('.desc'),
                        limiT = _winH * i,
                        limitB = limiT + _winH,
                        elY, imgY, titleY, descY;
    
    
                    if(st > limiT - _winH && st <= limitB){
                        elY = limiT - st;
                        
                        console.log(elY);
                        $el.css({'transform': 'translate3d(0, '+ elY + 'px, 0)'});
                        
                        if(i > 0){
                            //Math.min(0, value); -> -음수일 경우만 불러오는, 양수일 경우는 0.
                           //Math.max(0, value);-> -양수일 경우만 불러오는, 음수일 경우는 0
                            if(i == 1){
                                // imgX = 0;
                                imgY = elY * -1;
                                // titleX = 0;
                                titleY = 0;
                                // descX = 0;
                                descY = 0;
                            // }else if(i == 2){
                            //     imgX = elY /2 * -1;
                            //     imgY = elY /2 * -1;
                            //     // titleX = 0;
                            //     // titleY = 0;
                            //     // descY = 0;
                            //     descX = Math.max(-elX * 2);
                            // }else if(i == 3){
                            //     imgX = elY /3;
                            //     imgY = elY /3 * -1;
                            //     titleX = Math.min(elY /3);
                            //     titleY = Math.min(elY /-3);
                            //     descY = descY = Math.max(elY / 3);
                            //     descX = descY = Math.max(elY / 3);
                            // }else{
                            //     imgX = elY /10;
                            //     imgY =elY /8* -1;
                            //     titleX = Math.min(elX * 2);
                            //     // titleY = 0;
                            //     titleY = Math.min(0, elY / 3);
                            //     descY = Math.max(0, elY / 3);
                            // }
                            }else{
                                imgX = elY /2*-1;
                                // imgY =elY /8* -1;
                                // titleX = Math.min(elX * 2);
                                // titleY = 0;
                                titleY = Math.min(0, elY / 3);
                                descY = Math.max(0, elY / 3);
                            }
                            $img.css({'transform': 'translate3d(0, '+ imgY + 'px, 0)'});
                            $title.css({'transform': 'translate3d('+ titleY + 'px, 0, 0)'});
                            $desc.css({'transform': 'translate3d(0, '+ descY + 'px, 0)'});
    
                        }else{
    
                        }
                    }
                    else{
                        $el.css({'transform': 'translate3d(0, 100vh, 0)'});
                        $img.css({'transform': 'translate3d(0, 0, 0)'});
                        if(i > 0){
                            $title.css({'transform': 'translate3d(0, 0, 0)'});
                            $desc.css({'transform': 'translate3d(0, 0, 0)'});
                        }
                    }
                })
            };
        
        $win.trigger('resize'); 
        
    });
</script>