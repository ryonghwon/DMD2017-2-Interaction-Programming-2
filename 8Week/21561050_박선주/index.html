<!DOCTYPE HTML>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Sprite Animation</title>
<link rel="stylesheet" href="./css/style.css"/>
<script type="text/javascript" src="js/jquery.min.js"></script>
</head>
<body>
<div id="wrap">
<div class="yellow">&nbsp;</div>
<div class="red">&nbsp;</div>
</div>
<script>
    var Sprite;
    var Sprite2;
  $(document).ready(function(){

      Sprite = {
      _isReverse:false,
      _timer: 0,
      appInit:function(){
        //this 는 Sprite
        var _this = Sprite;
        _this.layout();
        // _this.reset(num);
        _this.reset();
        _this.resetInit();
      },
      // layout:function(num){
      //   this.$el = $('.red');
      //   this.$el2 = $('.yellow');
      // },
      layout:function(){
        this.$el = $('.red');
        // this.$el2 = $('.yellow');
      },
      reset:function(){
        this._cuId = 0;
        this._max = 14;
        this._row = 4;
        this._col = 4;
        this._maxW = 600;
        this._maxH = 600;
        this._width = this._maxW / this._col;
        this._height = this._maxH / this._row;
        this.update();
      },
      resetInit:function(){

      },
      play:function(){
        var _this = Sprite;
        clearInterval(_this._timer);
        _this._timer = setInterval(_this.progress, 60);
      },
      stop:function(){
        var _this = Sprite;
        clearInterval(_this._timer);
        _this._timer = setInterval(_this.progress, 60);
      },
      progress:function(){
        var _this = Sprite;
        if(!!_this._isReverse){
          //순방향
          _this._cuId++;
        }else{
          //역방향
          _this._cuId--;
        }
        console.log(_this._cuId);

        // if(_this._cuId < 0){
        //     _this._cuId = 0;
        // }
        if(_this._cuId >= _this._max - 1){
          _this._cuId = 0;
        }else if(_this._cuId < 0){
          _this._cuId = 0;
        }
        _this.update();
      },
      update:function(){
        var _this = Sprite ,x ,y;
        // _this._cuId = 10;
        x = _this._cuId % _this._row * _this._width * -1;
        y = Math.floor(_this._cuId / _this._col) * _this._height * -1;
        console.log(x,y);
        _this.$el.css({'background-position':x + 'px ' + y + 'px'});
        // _this.$el2.css({'background-position':x + 'px ' + y + 'px'});
      }
    };
    Sprite.appInit();

      $('.red').mouseover(function(){
        Sprite._isReverse = true;
        Sprite.play();
      });
      $('.red').mouseout(function(){
        Sprite._isReverse = false;
        Sprite.play();
      });


      Sprite2 = {
      _isReverse:false,
      _timer: 0,
      appInit:function(){
        //this 는 Sprite
        var _this = Sprite2;
        _this.layout();
        _this.reset();
        _this.resetInit();
      },
      layout:function(){
        this.$el2 = $('.yellow');
      },
      reset:function(){
        this._cuId = 0;
        this._max = 16;
        this._row = 4;
        this._col = 4;
        this._maxW = 600;
        this._maxH = 600;
        this._width = this._maxW / this._col;
        this._height = this._maxH / this._row;
        this.update();
      },
      resetInit:function(){

      },
      play:function(){
        var _this = Sprite2;
        clearInterval(_this._timer);
        _this._timer = setInterval(_this.progress, 60);
      },
      stop:function(){
        var _this = Sprite2;
        clearInterval(_this._timer);
        _this._timer = setInterval(_this.progress, 60);
      },
      progress:function(){
        var _this = Sprite2;
        if(!!_this._isReverse){
          //순방향
          _this._cuId++;
        }else{
          //역방향
          _this._cuId--;
        }
        console.log(_this._cuId);

        // if(_this._cuId < 0){
        //     _this._cuId = 0;
        // }
        if(_this._cuId >= _this._max - 1){
          _this._cuId = 0;
        }else if(_this._cuId < 0){
          _this._cuId = 0;
        }
        _this.update();
      },
      update:function(){
        var _this = Sprite2 ,x ,y;
        // _this._cuId = 10;
        x = _this._cuId % _this._row * _this._width * -1;
        y = Math.floor(_this._cuId / _this._col) * _this._height * -1;
        console.log(x,y);
        _this.$el2.css({'background-position':x + 'px ' + y + 'px'});
      }
    };
    Sprite2.appInit();

      $('.yellow').mouseover(function(){
        Sprite2._isReverse = true;
        Sprite2.play();
      });
      $('.yellow').mouseout(function(){
        Sprite2._isReverse = false;
        Sprite2.play();
      });
  });
</script>
</body>
</html>
