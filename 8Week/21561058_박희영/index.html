<!DOCTYPE HTML>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Sprite Animation</title>
<link rel="stylesheet" href="./css/style.css"/>
<script type="text/javascript" src="./js/libs/jquery.min.js"></script>
</head>
<body>
<div id="wrap">
<div class="zootopia">&nbsp;</div>
<div class="minion">&nbsp;</div>
<div class="dog">&nbsp;</div>
<div class="banana">&nbsp;</div>
</div>
<script type="text/javascript">
var Sprite;
$(document).ready(function(){

  $('#wrap').children().hover(function(){
    if($(this).hasClass('minion')){
      Sprite.layout('minion')
    }else if($(this).hasClass('zootopia')){
      Sprite.layout('zootopia')
    }else if($(this).hasClass('dog')){
      Sprite.layout('dog')
    }else if($(this).hasClass('banana')){
      Sprite.layout('banana')
    }
    Sprite.play(true);
  }
  ,function(){
    Sprite.play(false);
  }
)

  Sprite = {
    _isReverse:false,
    _timer:0,
    appInit:function(){
      var _this = Sprite;
      _this.layout();
      //_this.reset();
      _this.resetInit();
    },
    layout:function(whatIs){
      var _this = Sprite;
      this.$el = $('.'+ whatIs);
      if(whatIs == 'minion'){
        _this.reset(48, 7, 7, 1008, 1008);
      }else if(whatIs == 'zootopia'){
        _this.reset(12, 3, 4, 576, 432);
      }else if(whatIs == 'dog'){
        _this.reset(16, 4, 4, 640, 640);
      }else if(whatIs == 'banana'){
        _this.reset(9, 3, 3, 480, 480);
      }
    },
    reset:function(max, row, col, mawW, maxH){
      this._cuId = 0;//현재 위치
      this._max = max;//이미지갯수
      this._row = row;//줄
      this._col = col;//행
      this._maxW = mawW;//원본 이미지 넓이
      this._maxH = maxH;//원본 이미지 높이
      this._width = this._maxW / this._col;//넓이 = 원본이미지넓이 / 행
      this._height = this._maxH / this._row;// 높이 = 원본이미지높이 / 열
      this.update();
    },
    resetInit:function(){

    },
    play:function(bool){
      console.log(bool);
      var _this = Sprite;
      clearInterval(_this._timer);
      if(bool == true){
        _this._isReverse = true;
      }else if(bool == false){
        _this._isReverse = false;
      }
      _this._timer = setInterval(_this.progress, 200);
    },
    stop:function(){

    },
    progress:function(){
      var _this = Sprite;
      if(_this._isReverse){
        _this._cuId--;
      }else{
        _this._cuId++;
      };
      if(_this._cuId >= _this._max){
        _this._cuId = 0;
      }else if(_this._cuId < 0){
        _this._cuId = _this._max;
      }
      _this.update();
    },
    update:function(){
      var _this = Sprite, x, y;
      //this._cuId
      //this._cuId = 10;
      x = _this._cuId % _this._row * _this._width * -1; //
      y = Math.floor(_this._cuId % _this._col)* _this._height * -1;
      //console.log(_this._cuId % _this._row);//x의 위치
      //console.log(_this._max % _this._cuId);
      _this.$el.css({'background-position':x +'px ' + y + 'px '});
    //  console.log(x,y);
    }
  }
  Sprite.appInit();
});

</script>

</body>
</html>
