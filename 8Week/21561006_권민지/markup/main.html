<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="./css/reset.css">
        <link rel="stylesheet" href="./css/main.css">
        <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Slabo+27px&amp;subset=latin-ext" rel="stylesheet">
        <script type="text/javascript" src="./js/libs/jquery.min.js"></script>
        <title>Tokyo</title>
    </head>
    <body>
        <div class="wrap">
            <div class="banner">
                <nav role="navigation" class="paddle-nav">
                    <ul>
                        <li><button class="arrow prev"></button></li>
                        <li><button class="arrow next"></button></li>
                    </ul>
                </nav>
                <nav class="dot-nav">
                    <ul>
                    <li><span class="selected">&nbsp;</span></li><li>
                        <span>&nbsp;</span></li><li>
                        <span>&nbsp;</span></li><li>
                    </ul>
                </nav>
                <div class="banner-wrap">
                    <span class="fixed">東京</span>
                    <div class="banner-container">
                        <div class="banner-item">
                            <div class="image-area">
                                <img src="./img/main-1.jpg" alt="도쿄 이미지"/>
                            </div>
                            <div class="text-area">
                                <div class="desc">cultivated</div>
                                <div class="title">TOKYO</div>
                            </div>
                        </div>
                        <div class="banner-item">
                            <div class="image-area">
                                <img src="./img/main-2.jpg" alt="도쿄 불꽃놀이"/>
                            </div>
                            <div class="text-area">
                                <div class="desc">colourful</div>
                                <div class="title">TOKYO</div>
                            </div>
                        </div>
                        <div class="banner-item">
                            <div class="image-area">
                                <img src="./img/main-3.jpg" alt="후지산"/>
                            </div>
                            <div class="text-area">
                                <div class="desc">charming</div>
                                <div class="title">TOKYO</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="graph-grid">
                <div class="graph-item">
                    <img src="./img/graph1.png" alt="아이콘">
                    <span>01</span>
                    <span>Five million people a year</span>
                </div>
                <div class="graph-item">
                    <img src="./img/graph2.png" alt="아이콘">
                    <span>02</span>
                    <span>An annual increase in tourism</span>
                </div>
                <div class="graph-item">
                    <img src="./img/graph3.png" alt="아이콘">
                    <span>03</span>
                    <span>Increase in visitor population</span>
                </div>
            </div>

        <div class="paral">
            <div class="par-wrap">
                <div class="txt-wrap">
                    <span>お会あいできてうれしいです。</span>
                    <span>Tokyo is full of charms and promises a fun visit every time. Discover yet another new attraction in Tokyo.</span>
                </div>
            </div>
        </div>

        <div class="info">
            <ul>
                <li id="left-area">
                <div class="info-wrap">
                    <img src="./img/info-land.jpeg" alt="도쿄타워">
                    <div class="txt-box">
                        <h3>LANDMARK</h3>
                        <p>In addition, several skyscrapers house restaurants on their top floors from where diners can simultaneously enjoy good food and good views of the city.</p>
                    </div>
                    <span>Night View</span>
                </div>
            </li>
            <li id="right-area">
            <div class="info-wrap">
                <div class="txt-box">
                    <h3>CITY</h3>
                    <p>It is one of Japan's 47 prefectures, consisting of 23 central city wards and multiple cities, towns and villages west of the city center.</p>
                </div>
                <img src="./img/info-city.jpeg" alt="도쿄 이미지">
                <span>various of Tokyo</span>
            </div>
            <div class="info-wrap">
                <div class="txt-box">
                    <h3>FOOD</h3>
                    <p>There is many things to do for all ages and all different types of food to satisfy. With many restaurants, shops, and hotels one could never be bored.</p>
                </div>
                <img src="./img/info-food.jpg" alt="음식 사진">
                <span>Enjoy Taste food</span>
                </div>
            </li>
        </ul>
        </div>
        <div class="slide_wrap">
            <a href="slide/city.html" target="_blank">
            <div class="slide">
                <h2>City</h2>
                <span>The 23 wards Area</span>
                <div class="slide_inner">
                    <p>consisting of 23 central city wards and multiple cities, towns and villages west of the city center.</p>
                </div>
            </div>
        </a>
        <a href="slide/land.html" target="_blank">
            <div class="slide">
                <h2>Landmark</h2>
                <span>Night Views</span>
                <div class="slide_inner">
                    <p>As dusk falls, the sprawling metropolis of Tokyo transforms into a city of bright lights.</p>
                </div>
            </div>
        </a>
        <a href="slide/food.html" target="_blank">
            <div class="slide">
                <h2>Food</h2>
                <span>Enjoy Taste</span>
                <div class="slide_inner">
                    <p>88,000 restaurants and more Michelin stars than any other city in the world.</p>
                </div>
            </div>
        </a>
        </div>
    </div>
<script>
    (function($){
        $(document).ready(function(){
            var $win, $banner, $bannerWrap, $bannerContainer, $bannerItem, $bannerItemImage, $bannerItemImageEl,
                $dotNav, $paddleNav, $dovEl, $paddleEl, $paddlePrevEl, $paddleNextEl;
            var layout = function(){
                $win = $(window);
    
                $banner = $('.banner');
                $bannerWrap = $banner.children('.banner-wrap');
                $bannerContainer = $bannerWrap.children('.banner-container');
                $bannerItem = $bannerContainer.children('.banner-item');
                $bannerItemImage = $bannerItem.children('.image-area');
                $bannerItemImageEl = $bannerItemImage.children('img');
    
                $dotNav = $banner.children('.dot-nav');
                $dotNavEl = $dotNav.find('span');
    
                $paddleNav = $banner.children('.paddle-nav');
                $paddleEl = $paddleNav.find('.arrow');
                $paddlePrevEl = $paddleNav.find('.arrow.prev');
                $paddleNextEl = $paddleNav.find('.arrow.next');
            };
            var _cuId, _exId, _max, _bannerW, _bannerH, _isAni;
            var resetInit = function(){
                _cuId = 0;
                _exId = _cuId;
                _max = $bannerItem.length;
                //_bannerW = $banner.width();//초기값 1000
                _isAni = false;
                paddleCheck();
                dotCheck();
            };
    
            //init.
            var init = function(){
                $paddleEl.on('click', onClickPaddleNav);
                $dotNavEl.on('click', onClickDotNav);
                $win.on('resize', function(){
                    onResize();
                });
                $win.trigger('resize');
            };
    
            var onResize = function(){
                //1. 브라우저의 가로 사이즈을 받아옴
                _bannerW = $win.width();
                //2. 브라우저의 세로 사이즈를 받아옴
                _bannerH = $win.height();
                //3. 브라우저 사이즈에 맞게 변화 , height는 지정하지 않아도 됨
                $banner.width(_bannerW).height(_bannerH);
                $bannerContainer.width(_bannerW * _max);
                $bannerItem.width(_bannerW);
    
                var oW = 1400, oH = 933, imgW, imgH, imgT, imgL;
                imgW = _bannerW;
    
                //4.
                //1000 : 768 = imgW : imgH;
                imgH = Math.round(imgW * oH / oW); 
                //6. height값 재설정, 원본 비율보다 높이가 높을 경우에
                //height부터 넣어서 height에 따라서 width값을 재설정
                console.log(imgH, _bannerH);
                if(imgH < _bannerH){
                    imgH = _bannerH;
                    //1000 : 768 = imgW : imgH;
                    imgW = Math.round(imgH * oW / oH);
                }
                //7.
                //imgT = _bannerH / 2 - imgH / 2; //소수나옴
                imgT = Math.round(_bannerH / 2 - imgH / 2); //반올림해줌
                /*
                Math.floor - 내림 : 1000.5643 -> 1000
                Math.cell - 올림 : 1000.12121 -> 1001
                Math.abs - 절대값 : -1000 > 1000
                */
                imgL = Math.round(_bannerW / 2 - imgW / 2);
                //5. 원본값 비율 계산해서 원래 이미지에 넣어줌
                $bannerItemImageEl.width(imgW).height(imgH).css({'margin-top':imgT, 'margin-left':imgL});
    
                slide(true);
                // $bannerContainer.css({'width':_bannerW * _max});
                // $bannerItem.width(_bannerW);
                
            };
    
            //function.
            ///////////
            var onClickPaddleNav = function(e){
                e.preventDefault();
                if(_isAni) return;
    
                if($(e.target).hasClass('prev')){
                    console.log('이전으로');
                    _cuId--;
                    if(_cuId < 0){
                        _cuId = 0;
                    }
                }else if($(e.target).hasClass('next')){
                    console.log('다음으로');
                    _cuId++;
                    if(_cuId >= _max - 1){
                        _cuId = _max - 1;
                    }
                }
                console.log(_cuId);
                if(_exId !=_cuId){
                    slide();
                }
            };
            var onClickDotNav = function(e){
                e.preventDefault();
                if(_isAni) return;
                var $el = $(this), id;
                id = $dotNavEl.index(this);
                console.log(id);
                if(!$el.hasClass('selected')){
                    _cuId = id;
                    if(_exId !=_cuId){
                        slide();
                    }
                }
            };
            
            var slide = function(b = false){
                var left = _bannerW * _cuId * -1, duration;
                _isAni = true;
    
                if(!b){
                    //false
                    //애님이션이 될 때
                    var duration;
                    duration = 200 + Math.abs(_exId - _cuId) * 200;
                    $bannerContainer.stop(true).animate({'left':_bannerW * _cuId * -1}, duration, function(){
                    paddleCheck();
                    dotCheck();
                    _exId = _cuId;
                    _isAni = false;
                });
                }else{
                    //true
                    //리사이즈가 될 때
                    $bannerContainer.stop(true).animate({'left':left});
                    _isAni = false;
                }
            }
    
            var paddleCheck = function(){
                $paddleEl.removeClass('disabled');
                if(_cuId == 0){
                        //0
                        console.log(_cuId);
                        $paddlePrevEl.addClass('disabled');
    
                    }else if(_cuId == _max -1){
                        //3
                        console.log(_cuId);
                        $paddleNextEl.addClass('disabled');
                    }else{
                        $paddleEl.show();
                    }
            };
    
            var dotCheck = function(){
                $dotNavEl.removeClass('selected'); //전체 dot 에 selected 클래스를 해제
                //$dotNavEl.eq(_exId).removeClass('selected');// 지금 1일때라고 가정 : 0인 dot 에 selected 클래스르 해제.
                $dotNavEl.eq(_cuId).addClass('selected'); //index 1 인 dot 에 selected 클래스를 추가.
            }
    
            layout();
            resetInit();
            init();
        });

        $.fn.scrollReveal = function() {
            var windowHeight = $(window).height(),
                windowWidth = $(window).width(),
                initialScroll = $(window).scrollTop(),
                items = $('.info-wrap > img'),
                scroll;

            items.each(function(){
                if($(this).offset().top >= windowHeight){
                    $(this).addClass('hidden');
                }
            });
            $(window).scroll(function (event) {
                scroll = $(window).scrollTop();
                items.each( function(){
                    if($(this).offset().top <= (scroll + windowHeight)){
                        $(this).removeClass('hidden');
                    }
                });
            });

            return this;
        };

    $.fn.scrollReveal();
})(jQuery);
</script>
        </div>
    </body>