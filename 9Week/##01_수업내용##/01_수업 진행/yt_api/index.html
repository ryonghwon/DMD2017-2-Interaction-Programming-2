<!DOCTYPE HTML>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Youtube API</title>
<link rel="stylesheet" href="./css/style.css"/>
<script type="text/javascript" src="./js/libs/jquery.min.js"></script>
</head>
<body>
<div id="wrap">
  <div id="video" data-id="fhJ9k9aJRKw"></div>
  <div class="dim">&nbsp;</div>
</div>
<script>
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
var _YT;
//변경할 수 없는 함수...........
function onYouTubeIframeAPIReady() {
  //window.YT
  //window._YT = window.YT;
  ////////
  (function($){
    $.extend(true, _YT, YT);
    _YT.tvInit();
    //jQuery 가 로드되는 시점.
  })(jQuery);
}
//jQuery 사용할 수 있도록 Youtube API 로드 후 설정.
(function($){
  $(document).ready(function(){
    //ready.
    //window._YT;
    _YT = {
      _tv:'',
      _videoId:'fhJ9k9aJRKw',
      _quality:'hd1080',
      appInit:function(){
        this.layout();
        this.reset();
        this.resetInit();
      },
      layout:function(){
        this.$win = $(window);
        this.$el = $('#video');
        //<div id="video"></div>
        //selector를 찾으면 배열값에 들어옴.
        //첫번째 배열의 id. [0] .id
      },
      reset:function(){
        this._elId = this.$el[0].id;
        //this._videoId = this.$el.data('id');
        //console.log(this._videoId);
      },
      resetInit:function(){
        var _this = _YT;
        this.$win.on('resize', _this.onResize);
      },
      tvInit:function(){
        var _this = _YT;
        _this._tv = new _YT.Player(_this._elId, {
          suggestedQuality:_this._quality, 
          videoId: _this._videoId,
          events: {
            'onReady': _this.onTVReady,
            'onStateChange': _this.onTVStateChange
          },
          playerVars:{
              autoplay: 0,
              showinfo: 0,
              controls: 0
          }
        });
      },
      onTVReady:function(e){
        _YT._tv.playVideo();
        _YT.$el = $('#video');
        _YT.$win.trigger('resize');
      },
      onTVStateChange:function(e){
      },
      playVideo:function(){
        _YT._tv.playVideo();
      },
      stopVideo:function(){
        _YT._tv.stopVideo();
      },
      onResize:function(){
        var _this = _YT;
        var ratioW = 16, ratioH = 9, ratio = ratioW/ratioH;
        var ww = _this.$win.width(), wh = _this.$win.height(),videoW, videoH, videoT, videoL;
        videoW = ww;
        videoH = videoW / ratioW * ratioH;
        if(ww/wh < ratio){
            videoH = wh;
            videoW = videoH / ratioH * ratioW;
        }
        videoT = wh / 2 - videoH / 2;
        videoL = ww / 2 - videoW / 2;
        _this._tv.setSize(videoW, videoH);
        _this.$el.css({'top':videoT + 'px', 'left':videoL + 'px'});
      }
    }
    _YT.appInit();
  });
})(jQuery);
</script>
</body>
</html>


